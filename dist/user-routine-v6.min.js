(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};t.r(e),t.d(e,{routine:()=>m,test:()=>f});const n=Object.freeze({awaitTimeout:15e3,continueOnFailure:!1,displayLabel:!0,displayProgress:!0,displaySpeed:1,globalDelay:500,keyboardControls:!0,logCollapse:!1,logProgress:!0,logResult:!0,overrideCss:""});class i{static sleep(t){return new Promise((e=>setTimeout(e,t)))}static loop(t,e,n,o=null){return s=this,r=void 0,a=function*(){const s=Math.floor(t/e);if(n()===o)return!0;for(let t=0;t<s;t++)if(yield i.sleep(e),n()===o)return!0;return!1},new((c=void 0)||(c=Promise))((function(t,e){function n(t){try{o(a.next(t))}catch(t){e(t)}}function i(t){try{o(a.throw(t))}catch(t){e(t)}}function o(e){var o;e.done?t(e.value):(o=e.value,o instanceof c?o:new c((function(t){t(o)}))).then(n,i)}o((a=a.apply(s,r||[])).next())}));var s,r,c,a}}class o{static getElement(t,e){if(e){const n=document.querySelectorAll(t);return o.findElementWithTextRecursive(n,e)}return document.querySelector(t)}static sendClickEvent(t){return!!t&&!!o.elementIsClickable(t)&&(t.click(),!0)}static findElementWithTextRecursive(t,e,n=(t=>"SCRIPT"!==t.tagName)){for(const i of t){if(!o.elementContainsText(i,e))continue;if(n(i))return i;const t=Array.from(i.childNodes).filter((t=>{if(n(t))return t}));o.findElementWithTextRecursive(t,e,n)}}static elementIsClickable(t){return t.click&&"SCRIPT"!==t.tagName}static elementContainsText(t,e){const n=e.toLowerCase(),i=t.textContent&&t.textContent.toLowerCase().includes(n),o="string"==typeof t.value&&t.value.toLowerCase().includes(n);return i||o}static setValue(t,e){return void 0!==t.value&&(t.value=e,t.dispatchEvent(new InputEvent("input")),!0)}static checkValueMatch(t,e){return t.value===e}static checkVisible(t){const e=t.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight);return e.bottom<n&&e.top>0}static scrollIntoViewIfNeeded(t,e={behavior:"smooth"}){return n=this,o=void 0,r=function*(){if(!this.checkVisible(t))return t.scrollIntoView(e),yield i.sleep(700),!0},new((s=void 0)||(s=Promise))((function(t,e){function i(t){try{a(r.next(t))}catch(t){e(t)}}function c(t){try{a(r.throw(t))}catch(t){e(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof s?n:new s((function(t){t(n)}))).then(i,c)}a((r=r.apply(n,o||[])).next())}));var n,o,s,r}}function s(t,e){var n=Math.pow(10,e||0);return Math.round(t*n)/n}var r=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};class c{static await(t,e="",i=n.globalDelay,o=n.awaitTimeout){return r(this,void 0,void 0,(function*(){const n=performance.now();try{return yield this.tryAwait(t,e,o,i,n)}catch(i){return yield this.catchAwait(t,e,i.message,n)}}))}static tryAwait(t,e,n,o,a){return r(this,void 0,void 0,(function*(){const r=c.getEmptyActionResult(),u=yield i.loop(o,n,(()=>c.checkExists(t,e)),!0),l=s(performance.now()-a,1).toFixed(1),h=[`Selector "${t}"`+e?`containing text "${e}"`:"",u?"was found":"was not found",`after ${l} seconds`];return r.success=u,r.message=h.join(" "),r}))}static catchAwait(t,e,n,i){return r(this,void 0,void 0,(function*(){const o=c.getEmptyActionResult(),r=s(performance.now()-i,1).toFixed(1),a=[`Await for selector "${t}"`+e?`containing text "${e}"`:"",`stopped after ${r} seconds due to unexpected error: "${n}"`];return o.success=!1,o.message=a.join(" "),o.error=n,o}))}static awaitNot(t,e,i=n.globalDelay,o=n.awaitTimeout){return r(this,void 0,void 0,(function*(){const n=performance.now();try{return yield this.tryAwaitNot(t,e,o,i,n)}catch(i){return yield this.catchAwaitNot(t,e,i.message,n)}}))}static tryAwaitNot(t,e,n,o,a){return r(this,void 0,void 0,(function*(){const r=c.getEmptyActionResult(),u=yield i.loop(o,n,(()=>c.checkExistsNot(t,e)),!0),l=s(performance.now()-a,1).toFixed(1),h=[`Selector "${t}"`+e?`containing text "${e}"`:"",u&&0===Number(l)?"was not found":u?"disappeared":"still appeared",`after ${l} seconds`];return r.success=u,r.message=h.join(" "),r}))}static catchAwaitNot(t,e,n,i){return r(this,void 0,void 0,(function*(){const o=c.getEmptyActionResult(),r=s(performance.now()-i,1).toFixed(1),a=[`Await for selector "${t}"`+e?`containing text "${e}"`:"to disappear",`stopped after ${r} seconds due to unexpected error: "${n}"`];return o.success=!1,o.message=a.join(" "),o.error=n,o}))}static click(t,e){const n=o.getElement(t,e);return o.sendClickEvent(n)}static comment(){return r(this,void 0,void 0,(function*(){}))}static checkExists(t,e){const n=o.getElement(t,e);return Boolean(n)}static checkExistsNot(t,e){const n=o.getElement(t,e);return!Boolean(n)}static fill(t,e){const n=o.getElement(t);return o.setValue(n,String(e))}static navigate(t){return window.location.href=t,!0}static valueIs(t,e){const n=o.getElement(t);return o.checkValueMatch(n,String(e))}static valueIsNot(t,e){const n=o.getElement(t);return!o.checkValueMatch(n,String(e))}static wait(t){return r(this,void 0,void 0,(function*(){return yield i.sleep(t),!0}))}static getEmptyActionResult(){return{success:!1,message:""}}}class a{constructor(){return this.actions=[],this}await(t,e){return this.actions.push({name:"await",args:[t,e]}),this}awaitNot(t,e){return this.actions.push({name:"awaitNot",args:[t,e]}),this}click(t,e){return this.actions.push({name:"click",args:[t,e]}),this}comment(t,e){return this.actions.push({name:"comment",args:[t,e]}),this}exists(t,e){return this.actions.push({name:"exists",args:[t,e]}),this}existsNot(t,e){return this.actions.push({name:"existsNot",args:[t,e]}),this}fill(t,e){return this.actions.push({name:"fill",args:[t,e]}),this}log(t){return this.actions.push({name:"log",args:[t]}),this}navigate(t){return this.actions.push({name:"nav",args:[t]}),this}valueIs(t,e){return this.actions.push({name:"valueIs",args:[t,e]}),this}valueIsNot(t,e){return this.actions.push({name:"valueIsNot",args:[t,e]}),this}}class u extends a{constructor(t,e){return super(),this.manifest={label:"",actions:[],config:n,log:[]},this.manifest.label=t,this.manifest.config=Object.freeze(Object.assign(Object.assign({},e),n)),this}run(){}executeAction(t){return e=this,n=void 0,o=function*(){return yield c[t.name](...t.args)},new((i=void 0)||(i=Promise))((function(t,s){function r(t){try{a(o.next(t))}catch(t){s(t)}}function c(t){try{a(o.throw(t))}catch(t){s(t)}}function a(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(r,c)}a((o=o.apply(e,n||[])).next())}));var e,n,i,o}}var l=function(t,e,n,i){return new(n||(n=Promise))((function(o,s){function r(t){try{a(i.next(t))}catch(t){s(t)}}function c(t){try{a(i.throw(t))}catch(t){s(t)}}function a(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(r,c)}a((i=i.apply(t,e||[])).next())}))};class h extends a{constructor(t,e){return super(),this.state={paused:!1,errorOccurred:!1,continueActions:!0,documentKeyDownSet:!1,nextButtonPressed:!1,currentStep:0},this.logArray=[],this.label=t,this.config=Object.freeze(Object.assign(Object.assign({},e),n)),this}run(){return l(this,void 0,void 0,(function*(){try{this.logArray.push("PASS: ")}catch(t){t instanceof ActionFailure?this.logArray.push("FAIL: "+t.message):this.logArray.push("ERROR: Unexpected Error: "+t.message)}}))}executeAction(t){return l(this,void 0,void 0,(function*(){yield this.beforeEach(),yield c[t.name](...t.args),yield this.afterEach()}))}beforeEach(){return l(this,void 0,void 0,(function*(){}))}afterEach(){return l(this,void 0,void 0,(function*(){}))}}class d extends u{}function f(t,e){return console.log("TEST FUNCTION REACHED!"),new h(t,e)}const m={devTest:(t,e)=>new u(t,e),test:(t,e)=>new h(t,e),tutorial:(t,e)=>new d(t,e)};exports.routine=e.routine,exports.test=e.test,Object.defineProperty(exports,"__esModule",{value:!0})})();